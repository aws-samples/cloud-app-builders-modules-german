### Einleitung
In einem Supermarkt haben mehrere Kassen geöffnet und es kaufen sehr viele Kunden ein. Normalerweise verteilen sich die Kunden von selbst an die verschiedenen Kassen, um schneller bezahlen zu können. In der Cloud hingegen passiert das nicht von selbst, sodass ein Load Balancer benötigt wird.

### Technische Konzepte
Ein **[Load Balancer](https://de.wikipedia.org/wiki/Lastverteilung_(Informatik))** verteilt den eingehenden Datenverkehr auf verschiedene Ziele z.B. Instanzen oder Container, damit keine der Ressourcen überlastet ist. Wenn eine Ressource nicht mehr ansprechbar ist, dann werden die Anfragen an die anderen Ziele weitergeleitet. Dadurch kann Hochverfügbarkeit gewährleistet werden.

### Relevante AWS Services
Ein **[Elastic Load Balancing](https://docs.aws.amazon.com/de_de/elasticloadbalancing/latest/userguide/what-is-load-balancing.html)** (ELB) verteilt den eingehenden Datenverkehr auf mehrere Ziele wie beispielsweise Amazon EC2-Instanzen, Container oder IP-Adressen, welche in verschiedenen Availability Zones in einer Region liegen können. Der Load Balancer überwacht den Zustand seiner Ziele und leitet den Verkehr nur an die gesunden weiter. Ziele werden als **[gesund](https://docs.aws.amazon.com/de_de/elasticloadbalancing/latest/gateway/health-checks.html)** betrachtet, wenn sie beispielsweise binnen eines definierten Zeitraums z.B. 10 Sekunden durch ein bestimmtes Protokoll antworten. Wenn der Datenverkehr sich ändert, kann auch der Load Balancer seine Kapazität automatisch anpassen. Durch das Verteilen über verschiedene Ziele in verschiedenen Availability Zones wird die Verfügbarkeit der Anwendungen erhöht. 

Es gibt verschiedene Arten von Load Balancern
**[verschiedene Arten von Load Balancern](https://docs.aws.amazon.com/de_de/AmazonECS/latest/developerguide/load-balancer-types.html)**: **Application Load Balancers** (ALBs), **Network Load Balancers** (NLBs), and **Classic Load Balancers** (CLBs). ALBs nutzen HTTP/HTTPS-Verkehr bzw. Schicht 7 des OSI-Modells. NLBs und CLBs nutzen beide TCP-Verkehr oder Schicht 4 des OSI Modells. Ein ALB unterstützt **[pfadbasiertes Routing](https://aws.amazon.com/de/premiumsupport/knowledge-center/elb-achieve-path-based-routing-alb/?nc1=h_ls)** und kann Anfragen an einen oder mehrere Ports von Containern weiterleiten. Im Folgenden wird ein ALB genutzt, um die Anfragen vom Frontend an die Frontend-Container weiterzuleiten, die beide in unterschiedlichen Subnetzen liegen.

Nicht nur Load Balancer helfen die Anwendung hochverfügbar zu machen, sondern auch Datenbanken können hochverfügbar werden. Eine **[Multi-AZ-Bereitstellung]( https://docs.aws.amazon.com/de_de/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html)** kann dabei helfen in einer Region hochverfügbar zu sein. Multi-AZ bedeutet, dass mindestens eine weitere **Standby-Instance der Amazon RDS Datenbank** in einer anderen Availability Zone zur Verfügung steht. Die Standby-Instance wird synchron zur primären Datenbankinstanz repliziert. Bei einem Ausfall der primären Instanz, wird ein **[Failover](https://aws.amazon.com/de/about-aws/whats-new/2018/01/amazon-rds-read-replicas-now-support-multi-az-deployments/)** automatisch initialisiert, wodurch für eine minimale Unterbrechung der Anwendung gesorgt wird.